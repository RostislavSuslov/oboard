import{CLICK_EVENT}from"./utils/index.js";const MENU_WRAPPER=document.querySelector(".app-header__items");if(MENU_WRAPPER){const e=document.querySelector(".app-menu__toggle"),t=MENU_WRAPPER.querySelector(".app-header__nav").querySelector(".app-header__nav-list"),r=t.querySelectorAll(".menu-item-has-children"),s="sub-menu",o=Array.from(t.querySelectorAll(`.${s}`)),i="js--open",n="--height",l=1024,c=e=>{e.forEach(e=>{e.parentNode.classList.remove(i),e.style.setProperty(n,`${e.clientHeight}px`),setTimeout(()=>{e.style.setProperty(n,0)})})},a=()=>{window.innerWidth<l&&(MENU_WRAPPER.classList.toggle(i),c(o))},y=e=>{if(window.innerWidth<l){const t=Array.from(e.composedPath());if(t.filter(e=>e.classList).some(e=>e.classList.contains(s)))return;const r=t.find(e=>e.classList.contains("menu-item-has-children"));r.classList.toggle(i);const l=r.querySelector(`.${s}`),a=Array.from(l.children).reduce((e,t)=>e+t.clientHeight,0),y=o.filter(e=>e!==l);c(y),l.clientHeight?(l.style.setProperty(n,`${a}px`),setTimeout(()=>{l.style.setProperty(n,0)})):(l.style.setProperty(n,`${a}px`),setTimeout(()=>{l.style.setProperty(n,"auto")},500))}};r.forEach(e=>{e.addEventListener(CLICK_EVENT,y)}),e.addEventListener(CLICK_EVENT,a)}